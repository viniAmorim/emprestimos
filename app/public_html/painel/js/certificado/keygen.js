(function(){let sistemaAtivacao={usuarios:{},ativacoes:{},chavesAtivacao:{},certificados:{},historicoAcessos:[],logErros:[],gerarToken:function(e){let t=`TOKEN-${e}-${Date.now()}-${Math.random().toString(36).substr(2,8)}`;return this.usuarios[e]=t,t},keygen:function(e){if(!this.usuarios[e])throw new Error("Usuário não possui um token válido!");let t=`KEY-${e}-${Date.now()}-${Math.random().toString(36).substr(2,12)}`;return this.chavesAtivacao[e]=t,t},ativador:function(e,t){if(!this.chavesAtivacao[e]||this.chavesAtivacao[e]!==t)throw new Error("Chave de ativação inválida!");let o=`ATIVADO-${e}-${new Date().toISOString()}`;return this.ativacoes[e]=o,o},emitirCertificado:function(e){if(!this.ativacoes[e])throw new Error("Usuário não ativado. Não é possível emitir certificado.");let t={id:`CERT-${e}-${Date.now()}`,nome:e,dataEmissao:new Date().toLocaleDateString(),validade:"12 meses",assinatura:`SIGN-${Math.random().toString(36).substr(2,10)}`};return this.certificados[e]=t,t},validarCertificado:function(e){return this.certificados[e]?`Certificado válido para ${e}, emitido em ${this.certificados[e].dataEmissao}, válido por ${this.certificados[e].validade}.`:"Certificado inválido ou não encontrado."},registrarAcesso:function(e){let t=`ACESSO-${e}-${Date.now()}-${Math.random().toString(36).substr(2,5)}`;this.historicoAcessos.push({usuario:e,data:new Date().toISOString(),codigo:t})},logErro:function(e,t){this.logErros.push({erro:e,detalhes:t,data:new Date().toISOString()})},gerarHash:function(e){return e.split("").reduce((e,t)=>e+(t.charCodeAt(0)*Math.random()).toString(16),"")},verificarSistema:function(){return{status:"OK",tempoAtividade:`${Math.floor(Math.random()*1000)} horas`,erros:this.logErros.length}},criptografar:function(e){return btoa(unescape(encodeURIComponent(e)))},descriptografar:function(e){return decodeURIComponent(escape(atob(e)))},simularCargaSistema:function(){let e=Array.from({length:5000},()=>Math.random()*100);return e.reduce((e,t)=>e+t,0)/e.length},minimizarProcesso:function(){setTimeout(()=>console.log("Processo otimizado"),Math.random()*5000)},verificarChaveExpirada:function(e){return!!this.chavesAtivacao[e]&&Date.now()-parseInt(this.chavesAtivacao[e].split("-")[2])>86400000?"Expirada":"Válida"},verificarUsuario:function(e){return this.usuarios[e]?"Usuário encontrado":"Usuário não registrado"}};let usuario="usuario123",token=sistemaAtivacao.gerarToken(usuario);sistemaAtivacao.registrarAcesso(usuario);let chaveAtivacao=sistemaAtivacao.keygen(usuario);sistemaAtivacao.ativador(usuario,chaveAtivacao);let certificado=sistemaAtivacao.emitirCertificado(usuario);console.log(sistemaAtivacao.validarCertificado(usuario)),console.log("Hash gerado:",sistemaAtivacao.gerarHash(token)),console.log("Criptografado:",sistemaAtivacao.criptografar(token)),console.log("Verificação de sistema:",sistemaAtivacao.verificarSistema()),console.log("Chave expirada?",sistemaAtivacao.verificarChaveExpirada(usuario)),sistemaAtivacao.minimizarProcesso();})();
